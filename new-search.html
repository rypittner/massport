<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Google Places Search (New API) Example</title>
  <style>
    #results {
      margin-top: 1em;
      max-width: 400px;
      border: 1px solid #ddd;
      padding: 0.5em;
      font-family: Arial, sans-serif;
    }
    .place {
      padding: 8px;
      border-bottom: 1px solid #eee;
      cursor: pointer;
    }
    .place:hover {
      background-color: #f0f8ff;
    }
  </style>
</head>
<body>
  <h2>Place Search with Google Maps Places API (New)</h2>
  <input id="search" type="search" placeholder="Type place and press Enter" autocomplete="off" />
  <div id="results"></div>

  <script>
    let service;

    function initMap() {
      // Dummy map container - invisible, just to create the service
      const dummyMap = document.createElement('div');
      service = new google.maps.places.PlacesService(dummyMap);

      const input = document.getElementById('search');
      const results = document.getElementById('results');

      input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          const query = input.value.trim();
          if (!query) {
            results.innerHTML = '';
            return;
          }
          results.textContent = 'Searching...';

          const request = {
            query: query,
            fields: ['name', 'formatted_address', 'place_id']
          };

          service.findPlaceFromQuery(request, (places, status) => {
            if (status !== google.maps.places.PlacesServiceStatus.OK || !places || places.length === 0) {
              results.textContent = 'No results found or error: ' + status;
              return;
            }
            results.innerHTML = '';
            places.forEach(place => {
              const div = document.createElement('div');
              div.className = 'place';
              div.textContent = `${place.name} â€” ${place.formatted_address}`;
              div.onclick = () => alert(`You selected:\n${place.name}\nPlace ID: ${place.place_id}`);
              results.appendChild(div);
            });
          });
        }
      });
    }
  </script>

  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCmOEfuSho8iQNLWykqxkjvg-I2A1yxFK0&libraries=places&callback=initMap"
    async
    defer
  ></script>
</body>
</html>

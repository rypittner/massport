<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Google Places Text Search - GitHub Pages</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 1em; }
    #results { margin-top: 1em; }
    .place { cursor: pointer; padding: 5px; border-bottom: 1px solid #ccc; }
    .place:hover { background: #efefef; }
  </style>
</head>
<body>
  <h1>Place Search (Client-side)</h1>
  <input type="text" id="search" placeholder="Type a place name..." />
  <button id="searchBtn">Search</button>

  <div id="results"></div>

  <script>
    const API_KEY = 'AIzaSyCmOEfuSho8iQNLWykqxkjvg-I2A1yxFK0'; // Replace with your API key here

    const searchInput = document.getElementById('search');
    const searchBtn = document.getElementById('searchBtn');
    const resultsDiv = document.getElementById('results');

    searchBtn.addEventListener('click', async () => {
      const query = searchInput.value.trim();
      if (!query) {
        alert('Please enter a search query.');
        return;
      }

      resultsDiv.innerHTML = 'Searching...';

      try {
        // Construct URL for Places Text Search
        const url = new URL('https://maps.googleapis.com/maps/api/place/textsearch/json');
        url.searchParams.set('query', query);
        url.searchParams.set('key', API_KEY);

        // **Important:** Google Places API Text Search endpoint (https://maps.googleapis.com/maps/api/place/textsearch/json)
        // **DOES NOT support CORS from browser** (This will cause CORS errors if called directly from browser).

        // Therefore, we must use Google Maps JavaScript Places Library instead for client side usage.

        // --- Fallback: Use Places Library Text Search via Google Maps JavaScript API ---

        resultsDiv.innerHTML = 'Please use the Google Maps JavaScript API for client-side text search.';

      } catch (error) {
        resultsDiv.innerHTML = 'Error: ' + error.message;
      }
    });

    // The direct REST API call to textsearch/json DOES NOT work from client-side (CORS blocked),
    // so below is how to use Google Maps JavaScript API Places Text Search in client-side:

    function initMap() {
      const service = new google.maps.places.PlacesService(document.createElement('div'));
      searchBtn.addEventListener('click', () => {
        const query = searchInput.value.trim();
        if (!query) return alert('Please enter a search query.');

        resultsDiv.innerHTML = 'Searching...';

        service.textSearch({ query }, (results, status) => {
          if (status !== google.maps.places.PlacesServiceStatus.OK || !results) {
            resultsDiv.innerHTML = 'No results found or error occurred.';
            return;
          }

          resultsDiv.innerHTML = '';
          results.forEach(place => {
            const div = document.createElement('div');
            div.className = 'place';
            div.textContent = place.name + ' â€” ' + (place.formatted_address || place.vicinity || '');
            div.addEventListener('click', () => {
              alert(`You clicked: ${place.name}\nAddress: ${place.formatted_address || place.vicinity || 'N/A'}`);
            });
            resultsDiv.appendChild(div);
          });
        });
      });
    }
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCmOEfuSho8iQNLWykqxkjvg-I2A1yxFK0&libraries=places&callback=initMap" async defer></script>
</body>
</html>
